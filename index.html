<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mini App Monetag</title>

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Monetag SDK -->
  <script src="https://libtl.com/sdk.js"
          data-zone="10580493"
          data-sdk="show_10580493"></script>
</head>

<body style="font-family: Arial; text-align:center; margin-top:50px;">

  <h2>Rewarded Ads</h2>
  <p>Klik tombol untuk menonton iklan</p>

  <button onclick="tontonIklan()" style="padding:15px 30px; font-size:18px; cursor:pointer;">
    Tonton Iklan
  </button>

  <p id="status" style="margin-top:20px; font-weight:bold;"></p>

  <script>
    // preload iklan saat halaman dibuka
    window.onload = function () {
      try {
        show_10580493({ type: "preload", ymid: "event-123" });
        console.log("Preload berhasil");
      } catch (e) {
        console.log("Preload error", e);
      }
    };

    function tontonIklan() {
      document.getElementById("status").innerHTML = "Loading iklan...";

      show_10580493({ ymid: "event-123" })
        .then(() => {
          document.getElementById("status").innerHTML = "Iklan selesai ✅";
          alert("Kamu sudah menonton iklan!");
        })
        .catch(() => {
          document.getElementById("status").innerHTML = "Iklan gagal / tidak tersedia ❌";
          alert("Iklan gagal atau tidak tersedia, coba lagi.");
        });
    }
  </script>

</body>
</html>
